# Production Docker Compose for Vercel Deployment
# This file contains production-ready SMTP configuration

version: '3.8'

services:
  auth:
    container_name: supabase-auth-prod
    image: supabase/gotrue:v2.177.0
    restart: unless-stopped
    environment:
      # Production SMTP Configuration
      GOTRUE_SMTP_ADMIN_EMAIL: ${SMTP_ADMIN_EMAIL}
      GOTRUE_SMTP_HOST: ${SMTP_HOST}
      GOTRUE_SMTP_PORT: ${SMTP_PORT}
      GOTRUE_SMTP_USER: ${SMTP_USER}
      GOTRUE_SMTP_PASS: ${SMTP_PASS}
      GOTRUE_SMTP_SENDER_NAME: ${SMTP_SENDER_NAME}
      
      # Email Configuration
      GOTRUE_MAILER_AUTOCONFIRM: ${ENABLE_EMAIL_AUTOCONFIRM:-false}
      GOTRUE_EXTERNAL_EMAIL_ENABLED: ${ENABLE_EMAIL_SIGNUP:-true}
      
      # Other required environment variables
      GOTRUE_DB_DRIVER: postgres
      GOTRUE_DB_DATABASE_URL: ${DATABASE_URL}
      GOTRUE_SITE_URL: ${SITE_URL}
      GOTRUE_JWT_SECRET: ${JWT_SECRET}
      GOTRUE_JWT_EXP: ${JWT_EXPIRY:-3600}
