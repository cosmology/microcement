databaseChangeLog:
  - changeSet:
      id: data-0002
      author: microcement-dev
      comment: "Insert test users and scene configs for development"
      changes:
        - sql:
            sql: |
              -- Insert test user 1: ivanprokic@gmail.com (with config)
              INSERT INTO auth.users (
                  id,
                  instance_id,
                  aud,
                  role,
                  email,
                  encrypted_password,
                  email_confirmed_at,
                  recovery_sent_at,
                  last_sign_in_at,
                  raw_app_meta_data,
                  raw_user_meta_data,
                  created_at,
                  updated_at,
                  confirmation_token,
                  email_change,
                  email_change_token_new,
                  recovery_token
              ) VALUES (
                  'c26f99a3-e036-45e8-ab35-2afb63c6cb8a',
                  '00000000-0000-0000-0000-000000000000',
                  'authenticated',
                  'authenticated',
                  'ivanprokic@gmail.com',
                  crypt('test12345', gen_salt('bf')),
                  NOW(),
                  NULL,
                  NOW(),
                  '{"provider": "email", "providers": ["email"]}',
                  '{"email": "ivanprokic@gmail.com", "email_verified": true, "phone_verified": false, "sub": "c26f99a3-e036-45e8-ab35-2afb63c6cb8a"}',
                  NOW(),
                  NOW(),
                  '',
                  '',
                  '',
                  ''
              ) ON CONFLICT (id) DO NOTHING;

        - sql:
            sql: |
              -- Insert test user 2: testuser@example.com (without config)
              INSERT INTO auth.users (
                  id,
                  instance_id,
                  aud,
                  role,
                  email,
                  encrypted_password,
                  email_confirmed_at,
                  recovery_sent_at,
                  last_sign_in_at,
                  raw_app_meta_data,
                  raw_user_meta_data,
                  created_at,
                  updated_at,
                  confirmation_token,
                  email_change,
                  email_change_token_new,
                  recovery_token
              ) VALUES (
                  'a1b2c3d4-e5f6-7890-abcd-ef1234567890',
                  '00000000-0000-0000-0000-000000000000',
                  'authenticated',
                  'authenticated',
                  'testuser@example.com',
                  crypt('test12345', gen_salt('bf')),
                  NOW(),
                  NULL,
                  NOW(),
                  '{"provider": "email", "providers": ["email"]}',
                  '{"email": "testuser@example.com", "email_verified": true, "phone_verified": false, "sub": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"}',
                  NOW(),
                  NOW(),
                  '',
                  '',
                  '',
                  ''
              ) ON CONFLICT (id) DO NOTHING;

        - sql:
            sql: |
              -- Insert default scene design config for ivanprokic@gmail.com
              INSERT INTO public.scene_design_configs (
                  id,
                  user_id,
                  config_name,
                  model_path,
                  camera_fov,
                  camera_near,
                  camera_far,
                  orbital_height,
                  orbital_radius_multiplier,
                  orbital_speed,
                  target_size,
                  scale_multiplier,
                  rotation_y,
                  intro_duration,
                  intro_start_pos,
                  intro_end_pos,
                  hotspot_colors,
                  pulse_animation,
                  hotspot_focal_distances,
                  hotspot_categories,
                  look_at_targets,
                  api_hotspot_key_aliases,
                  is_default,
                  created_at,
                  updated_at
              ) VALUES (
                  'cb3d6b5e-0f47-4f7e-9333-5ccbdeda2636',
                  'c26f99a3-e036-45e8-ab35-2afb63c6cb8a',
                  'default',
                  '/models/no-material.glb',
                  75,
                  0.1,
                  1000,
                  40,
                  6,
                  0.2,
                  30,
                  2,
                  1.5707963267948966,
                  3000,
                  '{"x": 0, "y": 20, "z": 0}',
                  '{"x": -6.554798188035982, "y": 7.001298362376955, "z": 26.293127720925533}',
                  '{"normal": 9223167, "hover": 11722918, "pulse": 9223167}',
                  '{"duration": 800, "scale": 1.5, "opacity": 0.8}',
                  '{}',
                  '{}',
                  '[]',
                  '{}',
                  true,
                  NOW(),
                  NOW()
              ) ON CONFLICT (id) DO NOTHING;

        - sql:
            sql: |
              -- Insert all three follow paths for the scene design config
              
              -- 1. Current path (active) - uses original DEFAULT_CAMERA_POINTS
              INSERT INTO public.scene_follow_paths (
                  id,
                  scene_design_config_id,
                  path_name,
                  camera_points,
                  look_at_targets,
                  is_active,
                  created_at,
                  updated_at
              ) VALUES (
                  'a1b2c3d4-e5f6-7890-abcd-ef1234567891',
                  'cb3d6b5e-0f47-4f7e-9333-5ccbdeda2636',
                  'current',
                  '[
                      {"x": 20, "y": 5, "z": 0},
                      {"x": -8, "y": 6.5, "z": 2},
                      {"x": -14, "y": 6.75, "z": 7},
                      {"x": -8, "y": 7, "z": 24},
                      {"x": -4, "y": 7, "z": 30},
                      {"x": -2, "y": 7.25, "z": 32},
                      {"x": 12, "y": 7.5, "z": 32},
                      {"x": 20, "y": 8, "z": 25},
                      {"x": 16, "y": 8, "z": 0}
                  ]',
                  '[
                      {"x": 0, "y": 0, "z": 0},
                      {"x": 4, "y": 3, "z": 0},
                      {"x": 6, "y": 4, "z": 0},
                      {"x": 7, "y": 5, "z": 30},
                      {"x": 10, "y": 6, "z": 50},
                      {"x": 20, "y": 7, "z": 60},
                      {"x": 30, "y": 8, "z": 40},
                      {"x": 30, "y": 8, "z": 20},
                      {"x": 0, "y": 8, "z": -40}
                  ]',
                  true,
                  NOW(),
                  NOW()
              ) ON CONFLICT (id) DO NOTHING;

              -- 2. Bathroom walkthrough path (inactive)
              INSERT INTO public.scene_follow_paths (
                  id,
                  scene_design_config_id,
                  path_name,
                  camera_points,
                  look_at_targets,
                  is_active,
                  created_at,
                  updated_at
              ) VALUES (
                  'b2c3d4e5-f6a7-8901-bcde-f12345678912',
                  'cb3d6b5e-0f47-4f7e-9333-5ccbdeda2636',
                  'bathroom_walkthrough',
                  '[
                      {"x": 20, "y": 5, "z": 0},
                      {"x": 10, "y": 5, "z": -5},
                      {"x": 0, "y": 5, "z": -10},
                      {"x": -10, "y": 5, "z": -5},
                      {"x": -20, "y": 5, "z": 0},
                      {"x": -8, "y": 6.5, "z": 2},
                      {"x": -14, "y": 6.75, "z": 7},
                      {"x": -8, "y": 7, "z": 24},
                      {"x": -4, "y": 7, "z": 30}
                  ]',
                  '[
                      {"x": 0, "y": 0, "z": 0},
                      {"x": 5, "y": 2, "z": -8},
                      {"x": 0, "y": 3, "z": -15},
                      {"x": -5, "y": 2, "z": -8},
                      {"x": -10, "y": 1, "z": 0},
                      {"x": -8, "y": 6.5, "z": 2},
                      {"x": -14, "y": 6.75, "z": 7},
                      {"x": -8, "y": 7, "z": 24},
                      {"x": -4, "y": 7, "z": 30}
                  ]',
                  false,
                  NOW(),
                  NOW()
              ) ON CONFLICT (id) DO NOTHING;

              -- 3. Kitchen tour path (inactive)
              INSERT INTO public.scene_follow_paths (
                  id,
                  scene_design_config_id,
                  path_name,
                  camera_points,
                  look_at_targets,
                  is_active,
                  created_at,
                  updated_at
              ) VALUES (
                  'c3d4e5f6-a7b8-9012-cdef-123456789123',
                  'cb3d6b5e-0f47-4f7e-9333-5ccbdeda2636',
                  'kitchen_tour',
                  '[
                      {"x": 20, "y": 5, "z": 0},
                      {"x": 15, "y": 5, "z": 5},
                      {"x": 10, "y": 5, "z": 10},
                      {"x": 5, "y": 5, "z": 15},
                      {"x": 0, "y": 5, "z": 20},
                      {"x": -5, "y": 5, "z": 15},
                      {"x": -8, "y": 6.5, "z": 2},
                      {"x": -14, "y": 6.75, "z": 7},
                      {"x": -8, "y": 7, "z": 24}
                  ]',
                  '[
                      {"x": 0, "y": 0, "z": 0},
                      {"x": 8, "y": 2, "z": 8},
                      {"x": 5, "y": 3, "z": 15},
                      {"x": 0, "y": 4, "z": 25},
                      {"x": -2, "y": 3, "z": 20},
                      {"x": -5, "y": 2, "z": 10},
                      {"x": -8, "y": 6.5, "z": 2},
                      {"x": -14, "y": 6.75, "z": 7},
                      {"x": -8, "y": 7, "z": 24}
                  ]',
                  false,
                  NOW(),
                  NOW()
              ) ON CONFLICT (id) DO NOTHING;
